(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("claim-chucoin");let t=null,n=!1;function a(a){if(!a)return e.disabled=!0,n=!1,void(t=null);"active"===a.status||"countdown"===a.status?(e.disabled=!1,n=!0,t=a.id):(e.disabled=!0,n=!1,t=null)}const i=io();i.on("connect",(()=>{i.emit("requestCurrentData")})),i.on("rainData",(e=>{a(e)})),i.on("currentData",(e=>{a(e)})),e.addEventListener("click",(async function(){if(n)try{const a=await fetch("/api/v1/users/updateCoins",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rainId:t})}),i=await a.json();if(!a.ok||"success"!==i.status)throw new Error(i.message||"Failed to claim coin");alert("Coin claimed successfully!"),e.disabled=!0,n=!1,location.reload()}catch(e){console.error("Error claiming coin:",e),alert(e.message||"Error claiming coin. Please try again.")}else alert("There is no active rain to claim at the moment.")}))}))})();